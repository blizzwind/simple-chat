function send() {
  var msg = document.getElementById("inp").value;
  if (msg != "") {
    gun.get("chat").set(msg);
    document.getElementById("inp").value = "";
  }
}
function keySend() {
  if (event.key === "Enter") {
    send();
  }
}
var gun = Gun(["http://localhost:8080/gun"]);
var chat = document.createElement("div");
var tmp = [];
chat.id = "chat";
document.getElementById("app").prepend(chat);
document.getElementById("inp").addEventListener("keypress", keySend);
gun.get("chat").map().on(function (data, id) {
  var print = true;
  for (var i=0; i<tmp.length; i++) {
    if (id == tmp[i]) {
	  print = false;
	}
  }
  if (print) {
    tmp.push(id);
    var div = document.createElement("div");
    div.classList.add("msg");
    div.innerText = data;
    document.getElementById("chat").append(div);
    document.getElementById("chat").scrollTop = document.getElementById("chat").scrollHeight;
  }
});
